{% extends 'base.html' %}
{% load static %}

{% block title %}Jogos - Josiel Bar{% endblock %}

{% block content %}
<div class="menu-container">
    <div class="menu-header">
        <h1>Biblioteca de Jogos</h1>
        <p>Mais de 200 jogos de tabuleiro para todas as idades e gostos</p>
    </div>
    
    {% for categoria in categorias %}
    <div class="menu-category">
        <h2>{{ categoria.nome }}</h2>
        <div class="menu-grid">
            {% for jogo in categoria.jogos_list %}
            <div class="menu-item">
                <div class="menu-item-image">
                    {% if jogo.imagem %}
                        <img src="{{ jogo.imagem.url }}" alt="{{ jogo.nome }}">
                    {% elif jogo.imagem_url %}
                        {% if jogo.imagem_url|slice:":4" == "http" %}
                            <img src="{{ jogo.imagem_url }}" alt="{{ jogo.nome }}">
                        {% else %}
                            <img src="{% static jogo.imagem_url %}" alt="{{ jogo.nome }}">
                        {% endif %}
                    {% else %}
                        <div style="width: 100%; height: 100%; background: #f8f6f0; display: flex; align-items: center; justify-content: center; color: #666;">
                            Sem imagem
                        </div>
                    {% endif %}
                </div>
                <div class="menu-item-content">
                    <h3>{{ jogo.nome }}</h3>
                    <p class="menu-item-description">{{ jogo.descricao }}</p>
                    <p class="menu-item-ingredients">Tipo: {{ jogo.tipo }}</p>
                    <p class="menu-item-ingredients">Jogadores: {{ jogo.get_jogadores_display }}</p>
                    <p class="menu-item-ingredients">Tempo: {{ jogo.tempo_medio }}</p>
                    {% if jogo.total_copias > 0 %}
                        <p class="menu-item-price" style="color: {% if jogo.copias_disponiveis > 0 %}green{% else %}red{% endif %};">
                            {% if jogo.copias_disponiveis > 0 %}
                                ✓ {{ jogo.copias_disponiveis }} de {{ jogo.total_copias }} cópias disponíveis
                            {% else %}
                                ✗ Nenhuma cópia disponível no momento
                            {% endif %}
                        </p>
                    {% else %}
                        <p class="menu-item-price" style="color: orange;">
                            ⚠ Cópias não cadastradas
                        </p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

